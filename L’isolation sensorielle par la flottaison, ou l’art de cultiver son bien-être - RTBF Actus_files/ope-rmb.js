!function(){"use strict";var t=["tcf2","implied","usp","noConsent","auto","gpp"],n=function(){function n(){}return n.parseStringOrNull=function(t){return null==t||null==t?null:t.toString()},n.parseString=function(t){return t.toString()},n.parseStringArray=function(t){if(Array.isArray(t)){for(var n=!0,e=0;e<t.length&&n;e++)"string"!=typeof t[0]&&(n=!1);if(n)return t;throw new Error("There are non strings in the array")}throw new Error("Expected array but got ".concat(t))},n.parseBoolean=function(t){if("boolean"==typeof t)return t;throw new Error("Expected boolean, but got ".concat(t))},n.parseObject=function(t){if("object"==typeof t)return t;throw new Error("Expected object, got ".concat(t))},n.parseOptions=function(t){return t?n.parseObject(t):{}},n.validateOptCallback=function(t){return t?n.validateCallback(t):void 0},n.validateCallback=function(t){if("function"==typeof t)return t;throw new Error("Expected callback function, but got ".concat(t))},n.parseCmpName=function(e){var r=t.find((function(t){return t===n.parseString(e)}));if(r)return r;throw new Error("Invalid cmp name: ".concat(e))},n.parseSeatId=function(t){if(/^[a-zA-Z0-9\.-]+$/.test(t))return t;throw new Error('Invalid seat id "'.concat(t,'"'))},n}(),e=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},r=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},o=function(){function t(t,n,e){void 0===e&&(e=!0),this.seat=t,this.cb=n,this.include3rdParty=e,this.fpidPrefix="fpid",this.cpidPrefix="cpid",this.opePrefix="ope"}return t.prototype.run=function(t){var n=this;return Promise.all([t.trackingStrategy.onSetCookieCompleted$,t.trackingStrategy.onInit$,t.privacyFramework.consent]).then((function(e){var r=e[2];return n.retrieveId(t,r)}),(function(t){return n.cb(t,null)})).then((function(t){return n.cb(null,t)}),(function(t){return n.cb(t,null)})),t},t.prototype.retrieveId=function(t,n){var o=this;return new Promise((function(i,a){return e(o,void 0,void 0,(function(){var e,o,c,u,s,l;return r(this,(function(r){switch(r.label){case 0:return(e=t.trackingStrategy.getOrCreateIds(n))[this.cpidPrefix]?(s=e[this.cpidPrefix],i(s),[3,6]):[3,1];case 1:return r.trys.push([1,5,,6]),this.include3rdParty?[4,this.get3PID(t)]:[3,3];case 2:return c=r.sent(),[3,4];case 3:c=null,r.label=4;case 4:return o=c,u=e[this.fpidPrefix],o?(s=this.opePrefix+":"+o,i(s)):u?(s=this.fpidPrefix+":"+u,i(s)):a("Could not find any ids."),[3,6];case 5:return l=r.sent(),a(l),[3,6];case 6:return[2]}}))}))}))},t.prototype.get3PID=function(t){return e(this,void 0,void 0,(function(){var n=this;return r(this,(function(e){return[2,this.fetch3PID(t).then((function(t){return t?n.assemble3PID(t):null}),(function(t){}))]}))}))},t.prototype.fetch3PID=function(t){return e(this,void 0,void 0,(function(){var n,e;return r(this,(function(r){switch(r.label){case 0:return n=new URL("".concat(this.seat,"/v2/uid"),"".concat(t.taggerUrl)),e={mode:"cors",credentials:"include",referrerPolicy:"no-referrer-when-downgrade"},[4,fetch(n.toString(),e).then((function(t){if(200==t.status)return t.json();if(204==t.status)return null;throw"CurrentTrackingId: Unexpected error while fetching 3PID: ".concat(t)}))];case 1:return[2,r.sent()]}}))}))},t.prototype.assemble3PID=function(t){for(var n=new Array,e=0,r=Object.entries(t);e<r.length;e++){var o=r[e],i=o[0],a=o[1];i.startsWith("part-")&&n.push([i,a])}return n.length>0?(n.sort((function(t){return parseInt(t[0].slice(5))})),i=n.map((function(t){return t[1]})).reduce((function(t,n){return t+n}),"")):null},t}(),i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;var a,c=function(t){return"string"==typeof t&&i.test(t)},u=new Uint8Array(16);function s(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(u)}for(var l=[],p=0;p<256;++p)l.push((p+256).toString(16).substr(1));var f=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(l[t[n+0]]+l[t[n+1]]+l[t[n+2]]+l[t[n+3]]+"-"+l[t[n+4]]+l[t[n+5]]+"-"+l[t[n+6]]+l[t[n+7]]+"-"+l[t[n+8]]+l[t[n+9]]+"-"+l[t[n+10]]+l[t[n+11]]+l[t[n+12]]+l[t[n+13]]+l[t[n+14]]+l[t[n+15]]).toLowerCase();if(!c(e))throw TypeError("Stringified UUID is invalid");return e};var d,h=function(t,n,e){var r=(t=t||{}).random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=r[o];return n}return f(r)},y=function(){function t(t){this.storage=t}return t.instance=function(n){return new t(n)},t.prototype.getIds=function(){var t=this.getFpid();return this.isOptedOut()||!c(t)?{}:{fpid:t}},t.prototype.getOrCreateFpid=function(n){if(this.isOptedOut()||!(null==n?void 0:n.trackingEnabled()))return{};var e=this.getFpid();if(!c(e))try{var r=h();return this.storage.setItem(t.key,r),{fpid:r}}catch(t){return{}}return e?{fpid:e}:{}},t.prototype.getFpid=function(){try{return this.storage.getItem(t.key)}catch(t){return null}},t.prototype.setFpid=function(n){try{return this.storage.setItem(t.key,n),n}catch(t){return null}},t.prototype.removeFpid=function(){try{this.storage.removeItem(t.key)}catch(t){}},t.prototype.isOptedOut=function(){try{return this.storage.getItem(t.trackingStatusKey)===t.optedOut}catch(t){return!1}},t.prototype.optin=function(){var n;try{this.storage.removeItem(t.trackingStatusKey)}catch(t){var e=new Error("First party id optin failed with: ".concat(null!==(n=null==t?void 0:t.message)&&void 0!==n?n:t.toString));throw e.name="FpidOptinError",e}},t.prototype.optout=function(){var n;try{this.storage.setItem(t.trackingStatusKey,t.optedOut)}catch(t){var e=new Error("First party id optout failed with: ".concat(null!==(n=null==t?void 0:t.message)&&void 0!==n?n:t.toString));throw e.name="FpidOptoutError",e}},t.prototype.getPapiParameters=function(t){return this.getOrCreateFpid(t)},t.key="ope_fpid",t.trackingStatusKey="ope_fpid_tracking_status",t.optedOut="opted_out",t}(),v=function(){function t(t,n){this.document=t,this.domain=n,this.length=null}return t.prototype.getItem=function(t){var n=this.readCookie(t);if(n)return n;var e=localStorage.getItem(t);return e?(localStorage.removeItem(t),this.setItem(t,e),e):null},t.prototype.setItem=function(t,n){var e=new Date,r=new Date;return r.setFullYear(e.getFullYear()+1),this.setCookie(t,n,r)},t.prototype.removeItem=function(t){var n=new Date;n.setSeconds(42),this.setCookie(t,"",n)},t.prototype.clear=function(){this.removeItem(y.key)},t.prototype.setCookie=function(t,n,e){var r="".concat(t,"=").concat(n,";Expires=").concat(e.toUTCString(),";Path=/;Domain=").concat(this.domain,";SameSite=Lax");return this.document.cookie=r,n},t.prototype.readCookie=function(t){var n=this.document.cookie.split(";").find((function(n){return n.trim().startsWith(t)}));return n?n.split("=")[1].trim():null},t.prototype.key=function(t){throw"Not implemented!"},t}(),g=function(){function t(t,n){this.seat=t,this.cb=n}return t.prototype.run=function(t){var n,e=this;try{return this.action(t).then((function(){var t;return null===(t=e.cb)||void 0===t?void 0:t.call(e,null,!0)}),(function(t){var n;return null===(n=e.cb)||void 0===n?void 0:n.call(e,t,!1)})),t}catch(e){return null===(n=this.cb)||void 0===n||n.call(this,e,!1),t}},t.prototype.getFpidProvider=function(t){var n=t.firstPartyDomain?new v(document,t.firstPartyDomain):localStorage;return y.instance(n)},t}(),w=(d=function(t,n){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},d(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}d(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),m=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},b=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},k=function(t){function n(n,e,r,o){var i=t.call(this,n,o)||this;return i.email=e,i.language=r,i}return w(n,t),n.prototype.action=function(n){return m(this,void 0,void 0,(function(){var e,r,o;return b(this,(function(i){switch(i.label){case 0:return e=t.prototype.getFpidProvider.call(this,n),r=e.getFpid(),o=n.taggerGdprClient.dataAccess(this.seat,null,this.email,this.language,r),n.programmaticTenantId?[4,n.taggerGdprClient.dataAccess("pdmp",n.programmaticTenantId,this.email,this.language,r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[4,o];case 3:return i.sent(),[2]}}))}))},n}(g),S=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),P=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},O=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},C=function(t){function n(n,e){return t.call(this,n,e)||this}return S(n,t),n.prototype.action=function(n){return P(this,void 0,void 0,(function(){var e,r,o;return O(this,(function(i){switch(i.label){case 0:return e=t.prototype.getFpidProvider.call(this,n),r=e.getFpid(),e.optout(),o=n.taggerGdprClient.optOut(this.seat,null,r),n.programmaticTenantId?[4,n.taggerGdprClient.optOut("pdmp",n.programmaticTenantId,r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[4,o];case 3:return i.sent(),[2]}}))}))},n}(g),I=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},x=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},E=function(t){function n(n,e){return t.call(this,n,e)||this}return I(n,t),n.prototype.action=function(n){return _(this,void 0,void 0,(function(){var e,r,o=this;return x(this,(function(i){switch(i.label){case 0:return e=t.prototype.getFpidProvider.call(this,n).getFpid(),r=n.taggerGdprClient.dataDeletion(this.seat,null,e),n.programmaticTenantId?[4,n.taggerGdprClient.dataDeletion("pdmp",n.programmaticTenantId,e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[4,r];case 3:return i.sent(),[4,new Promise((function(t,e){new C(o.seat,(function(n,r){n?e(n):r?t():e("failed optout")})).run(n)}))];case 4:return i.sent(),[2]}}))}))},n}(g),T=function(){function t(t){this.seat=t}return t.prototype.run=function(t){var n;return null===(n=t.privacyPolicy)||void 0===n||n.removeModalWindow(),t},t}(),F=function(){function t(t,n){if(this.idSpace=t,this.cpid=n,!t||!/^[^\s\:]+$/.test(t))throw Error("Invalid idSpace '".concat(t,"' for cpid"));if(!n||!/^[^\s\:]+$/.test(n))throw Error("Invalid value '".concat(n,"' for cpid"))}return t.prototype.toString=function(){return"".concat(this.idSpace,":").concat(this.cpid)},t}(),A=function(){function t(){this.cpid=null,this.optedOut=!1}return t.prototype.getIds=function(){var t=this.cpid;return!this.isOptedOut()&&this.cpid?{cpid:t.toString()}:{}},t.prototype.getPapiParameters=function(t){return this.isOptedOut()?{}:this.getCpid()},t.prototype.getCpid=function(){return null!==this.cpid&&null!==this.cpid.cpid&&null!==this.cpid.idSpace?{cpid:this.cpid.cpid,idSpace:this.cpid.idSpace}:{}},t.prototype.optin=function(){throw new Error("Optout state for custom provided identifiers cannot be modified through the SDK")},t.prototype.optout=function(){throw new Error("Optout state for custom provided identifiers cannot be modified through the SDK")},t.prototype.isOptedOut=function(){return this.optedOut},t.prototype.set=function(t,n){this.cpid=t,this.optedOut=n},t.prototype.clear=function(){this.cpid=null,this.optedOut=!1},t}(),j=function(){function t(t,n,e,r){this.seat=t,this.idSpace=n,this.cpid=e,this.options=r}return t.prototype.run=function(t){var n,e;if(this.idSpace||this.cpid){var r=new F(this.idSpace,this.cpid);t.trackingStrategy.identifyUser(r,null!==(e=null===(n=this.options)||void 0===n?void 0:n.optedOut)&&void 0!==e&&e)}else t.trackingStrategy.logoutUser();return t},t}(),U=function(t){this.args=t,this.metric="sdk-consent-delayed"},D=function(t){this.args=t,this.metric="sdk-consent-rejected"},R=function(t){this.args=t,this.metric="sdk-consent-error"};function L(t,n){return function(e){var r=function(t,n){var e=new URL("".concat(n.metric),t);return Object.entries(n.args).forEach((function(t){var n=t[0],r=t[1];e.searchParams.set(n,r)})),e}(new URL("".concat(n,"/v2/metrics/"),t),e),o=new XMLHttpRequest;o.open("GET",r.toString()),o.send()}}L(new URL("https://tagger.opecloud.com"),"undefined");var M=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),N=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.message=n.errorMessage,e}return M(n,t),n.errorMessage="failed to locate consent framework",n}(Error);var B=function(){return B=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},B.apply(this,arguments)},G=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},V=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},z=function(){function t(t){this.url=null,this.url=t}return t.prototype.sendRequest=function(t,n,e,r,o,i){return void 0===e&&(e={}),void 0===r&&(r={}),G(this,void 0,void 0,(function(){var a,c,u,s,l,p,f,d;return V(this,(function(h){switch(h.label){case 0:for(a=new URL(n,this.url),c=0,u=Object.entries(e);c<u.length;c++)s=u[c],l=s[0],p=s[1],a.searchParams.set(l,p);f=B(B({},i),{referrerPolicy:"strict-origin-when-cross-origin",mode:"cors",method:t,credentials:"include",headers:r}),(null==o?void 0:o.contentType)&&(f.headers=B(B({},f.headers),{"Content-Type":o.contentType})),(null==o?void 0:o.content)&&(f.body=o.content),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,fetch(a.toString(),f)];case 2:if((d=h.sent()).ok)return[2,d.text()];throw{status:d.status,statusText:d.statusText};case 3:throw h.sent();case 4:return[2]}}))}))},t}(),K=function(){function t(t){this.taggerUrl=t,this.httpClient=new z(t)}return t.prototype.optOut=function(t,n,e){var r={contentType:"application/x-www-form-urlencoded",content:this.encodeAsFormUrlString({fpid:null!=e?e:""})},o=n?"/".concat(t,"/").concat(n,"/v2/tagger/optout"):"/".concat(t,"/v2/tagger/optout");return this.httpClient.sendRequest("POST",o,{},{},r)},t.prototype.optIn=function(t,n,e){var r=e?{fpid:e}:{},o=n?"/".concat(t,"/").concat(n,"/v2/tagger/optout"):"/".concat(t,"/v2/tagger/optout");return this.httpClient.sendRequest("DELETE",o,r)},t.prototype.dataDeletion=function(t,n,e){var r={contentType:"application/x-www-form-urlencoded",content:this.encodeAsFormUrlString({fpid:null!=e?e:""})},o=n?"/".concat(t,"/").concat(n,"/v2/tagger/delete"):"/".concat(t,"/v2/tagger/delete");return this.httpClient.sendRequest("POST",o,{},{},r)},t.prototype.dataAccess=function(t,n,e,r,o){var i={contentType:"application/x-www-form-urlencoded",content:this.encodeAsFormUrlString({email:e,languageCode:r,fpid:null!=o?o:""})},a=n?"/".concat(t,"/").concat(n,"/v2/tagger/access"):"/".concat(t,"/v2/tagger/access");return this.httpClient.sendRequest("POST",a,{},{},i)},t.prototype.encodeAsFormUrlString=function(t){return Object.entries(t).map((function(t,n){var e=t[0],r=t[1];return"".concat(e,"=").concat(encodeURIComponent(r))})).join("&")},t}(),$=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},q=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},W=function(){function t(t){this.storage=t}return t.prototype.withConsent=function(t){return $(this,void 0,void 0,(function(){return q(this,(function(n){switch(n.label){case 0:return[4,t.deviceAccessOk()];case 1:if(n.sent())return[2,this.storage];throw Error("Missing consent for accessing device storage.")}}))}))},t.prototype.removeItem=function(t){this.storage.removeItem(t)},t}(),J=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},X=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Y=function(){function t(t,n,e){this.storageKey=t,this.pStorage=n,this.ttlMs=e}return t.prototype.get=function(t,n){return J(this,void 0,void 0,(function(){var e,r;return X(this,(function(o){switch(o.label){case 0:return[4,this.pStorage.withConsent(t)];case 1:return e=o.sent(),r=this.load(e),n in r&&r[n].exp>Date.now()?[2,r[n].value]:[2,null]}}))}))},t.prototype.put=function(t,n,e){return J(this,void 0,void 0,(function(){var r,o;return X(this,(function(i){switch(i.label){case 0:return[4,this.pStorage.withConsent(t)];case 1:return r=i.sent(),(o=this.load(r))[n]={exp:Date.now()+this.ttlMs,value:e},this.save(r,this.removeExpiredEntries(o)),[2]}}))}))},t.prototype.removeExpiredEntries=function(t){var n=Date.now();return Object.fromEntries(Object.entries(t).filter((function(t){t[0];return t[1].exp>n})))},t.prototype.load=function(t){var n=t.getItem(this.storageKey);return this.deserialize(n)},t.prototype.save=function(t,n){t.setItem(this.storageKey,this.serialize(n))},t.prototype.serialize=function(t){return JSON.stringify(t)},t.prototype.deserialize=function(t){return t?JSON.parse(t):{}},t}();function H(t){if(0===t.length)return 0;for(var n=0,e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}var Q=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},Z=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};var tt=function(){function t(n,e,r){this._cache=new Y(t.localStorageKey(r),n,e)}return t.localStorageKey=function(n){switch(n){case"contextual":return t.contextualKey;case"fullProfile":return t.profileKey;default:throw Error("Unknown papi CacheInstanceType: '".concat(n,"'"))}},t.instance=function(n){return new t(new W(localStorage),t.defaultTtl,n)},t.prototype.get=function(t,n){return Q(this,void 0,void 0,(function(){return Z(this,(function(e){return[2,this._cache.get(t,H(n).toString())]}))}))},t.prototype.put=function(t,n,e){return Q(this,void 0,void 0,(function(){return Z(this,(function(r){return[2,this._cache.put(t,H(n).toString(),e)]}))}))},t.contextualKey="opecloud_papi_c",t.profileKey="opecloud_papi_p",t.cacheInstances=new Map,t.defaultTtl=864e5,t}();function nt(){try{return"eu-central-1"}catch(t){return""}}var et=function(){var t=this;this.promise=new Promise((function(n,e){t.reject=e,t.resolve=n}))},rt=function(){return rt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},rt.apply(this,arguments)},ot=function(){function t(n,e,r,o){if(void 0===r&&(r=!0),this.isInitialized=!1,this.resolvableOnInit=new et,this.resolvableOnSetCookieCompleted=new et,this.resolvableOnThirdPartyTrackability=new et,this.onInit$=this.resolvableOnInit.promise,this.onSetCookieCompleted$=this.resolvableOnSetCookieCompleted.promise,this.name=t.strategyName,this.isThirdPartyTrackable$=this.resolvableOnThirdPartyTrackability.promise,this.cpidProvider=new A,e){var i=o?new v(document,o):localStorage;this.fpidProvider=y.instance(i)}n||this.initialize(),r||this.resolvableOnSetCookieCompleted.resolve()}return t.parseAdaptiveTracking=function(n){var e,r,o;if(n&&n.name!==t.strategyName)throw"Unknown strategy name: ".concat(n.name);return new t(null!==(e=null==n?void 0:n.awaitUserSignal)&&void 0!==e&&e,null===(r=null==n?void 0:n.fpidEnabled)||void 0===r||r,null===(o=null==n?void 0:n.awaitSetCookieCompleted)||void 0===o||o,null==n?void 0:n.firstPartyIdTrackingDomain)},t.progInstance=function(){return new t(!1,!0)},t.prototype.initialize=function(){this.isInitialized||(this.isInitialized=!0,this.resolvableOnInit.resolve())},t.prototype.firstVisitEventSent=function(){this.resolvableOnSetCookieCompleted.resolve()},t.prototype.setThirdPartyTrackability=function(t){this.resolvableOnThirdPartyTrackability.resolve(t)},t.prototype.identifyUser=function(t,n){this.cpidProvider.set(t,n),this.initialize(),this.resolvableOnSetCookieCompleted.resolve()},t.prototype.logoutUser=function(){this.initialize(),this.cpidProvider.clear()},t.prototype.getIds=function(){var t,n,e=null===(t=this.fpidProvider)||void 0===t?void 0:t.getIds(),r=null!==(n=this.cpidProvider.getIds())&&void 0!==n?n:{};return rt(rt({},e),r)},t.prototype.getOrCreateIds=function(t){var n,e,r=null===(n=this.fpidProvider)||void 0===n?void 0:n.getOrCreateFpid(t),o=null!==(e=this.cpidProvider.getIds())&&void 0!==e?e:{};return rt(rt({},r),o)},t.prototype.discardTrackingEvents=function(){return this.cpidProvider.isOptedOut()},t.prototype.getPapiParameters=function(t){var n,e;return rt(rt({},null!==(e=null===(n=this.fpidProvider)||void 0===n?void 0:n.getPapiParameters(t))&&void 0!==e?e:{}),this.cpidProvider.getPapiParameters(t))},t.strategyName="adaptive",t}(),it=function(){return it=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},it.apply(this,arguments)},at=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},ct=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},ut=function(){function t(t,n,e,r){this.seat=t,this.tenant=n,this.papiUrl=e,this.trackingStrategy=r}return t.progInstance=function(n){var e,r,o=null!==(e=n.seat)&&void 0!==e?e:"pdmp",i=null!==(r=n.profileApiUrl)&&void 0!==r?r:"https://".concat(o,".papi-public.").concat(nt(),".tagger.opecloud.com/v1/targeting");return new t(o,n.tenantId,new URL(i),ot.progInstance())},t.prototype.determineProfileCacheKey=function(){return this.trackingStrategy.getIds().cpid||"adaptive_tracking"},t.prototype.getContextual=function(t){return at(this,void 0,void 0,(function(){return ct(this,(function(n){switch(n.label){case 0:return[4,this.fetchPapi(this.contextualTargetingUrl(t))];case 1:return[2,n.sent()]}}))}))},t.prototype.getCacheBackedContextual=function(t){var n=this;return new Promise((function(e,r){n.getContextual().then((function(r){n.updateCache(t,r),e(r)})),n.loadContextualFromCache(t).then((function(t){e(t)}))}))},t.prototype.loadContextualFromCache=function(t){var n=this.pageUrl();return new Promise((function(e,r){tt.instance("contextual").get(t,n).then((function(t){if(null!=t){var n={t:t.content,s:t.kid?"":[],kid:null==t?void 0:t.kid};e(n)}}))}))},t.prototype.getProfile=function(t,n){return at(this,void 0,void 0,(function(){var e;return ct(this,(function(r){switch(r.label){case 0:return[4,t.consent];case 1:return(e=r.sent()).trackingEnabled()?[2,this.fetchPapi(this.profileTargetingUrl(e,n))]:[2,this.getContextual(n)]}}))}))},t.prototype.getCacheBackedProfile=function(t){var n=this;return new Promise((function(e,r){n.getProfile(t).then((function(r){n.updateCache(t,r),e(r)})),n.loadProfileFromCache(t).then((function(t){e(t)}))}))},t.prototype.loadProfileFromCache=function(t){var n=this,e=this.determineProfileCacheKey();return new Promise((function(r,o){tt.instance("fullProfile").get(t,e).then((function(e){null!=e&&n.loadContextualFromCache(t).then((function(t){var n=it({t:t.t,s:e.content},(t.kid||e.kid)&&{kid:t.kid||e.kid});r(n)}))}))}))},t.prototype.updateCache=function(t,n){return at(this,void 0,void 0,(function(){return ct(this,(function(e){return(null==n?void 0:n.t)&&tt.instance("contextual").put(t,this.pageUrl(),it({content:n.t},n.kid&&{kid:n.kid})),(null==n?void 0:n.s)&&tt.instance("fullProfile").put(t,this.determineProfileCacheKey(),it({content:n.s},n.kid&&{kid:n.kid})),!n.t&&n.s,[2]}))}))},t.prototype.fetchPapi=function(t){return at(this,void 0,void 0,(function(){var n,e,r;return ct(this,(function(o){switch(o.label){case 0:return[4,this.fetchFromUrl(t)];case 1:return(n=o.sent()).status>=400?(e=Error,r="Fetch failed: ",[4,n.text()]):[3,3];case 2:throw e.apply(void 0,[r+o.sent()]);case 3:return[2,n]}}))}))},t.prototype.fetchFromUrl=function(t){return fetch(t.toString(),{referrerPolicy:"no-referrer-when-downgrade",mode:"cors",credentials:"include"}).then((function(t){return t.json()}),(function(t){}))},t.prototype.papiRequestUrl=function(t){for(var n=new URL("",this.papiUrl),e=0,r=Object.entries(t);e<r.length;e++){var o=r[e],i=o[0],a=o[1];n.searchParams.set(i,a)}return n},t.prototype.getTenantQueryParams=function(){return this.tenant?{tenant:this.tenant}:{}},t.prototype.profileTargetingUrl=function(t,n){var e=null!=n?n:this.pageUrl();return this.papiRequestUrl(it(it(it({url:e},this.trackingStrategy.getPapiParameters(t)),t.papiParameters()),this.getTenantQueryParams()))},t.prototype.contextualTargetingUrl=function(t){null!=t||this.pageUrl();return this.papiRequestUrl(it({url:this.pageUrl(),gdpr_applies:"1",consent_string:""},this.getTenantQueryParams()))},t.prototype.pageUrl=function(){return window.location.href},t}(),st=function(){return st=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},st.apply(this,arguments)},lt=function(){function t(t,n){this.dcAPIUrl=t,this.funnel=n,this.httpClient=new z(this.dcAPIUrl)}return t.prototype.ingestEvent=function(t,n,e,r){var o=this;return void 0===r&&(r={}),this.funnel.withRaceProtection((function(){return o.httpClient.sendRequest("POST",t,e?{fpid:e}:{},{},{contentType:"text/plain",content:JSON.stringify(n)},st({redirect:"follow"},r))}))},t.initializeClient=function(n,e){return new t(n,e)},t.visitEndpoint="/web/visit",t.eventEndpoint="/ingest/event",t}(),pt=function(){return pt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},pt.apply(this,arguments)},ft=function(){function t(){}return t.chooseUrlAndRef=function(t,n,e,r,o){return window.parent!=window?{url:n||r||e,ref:o}:{url:n||e,ref:r||o}},t.fromVisitEvent=function(t){var n=this.chooseUrlAndRef(window,t.visiturl,t.url,t.ref,t.tref);return{ope_channel:"tagger",ope_event_type:"ope_visit",ope_item_uri:n.url,ope_ref:n.ref,ope_dc_region:t.dcRegion}},t.fromCustomEvent=function(t){var n=this.chooseUrlAndRef(window,void 0,t.url,t.ref,t.tref),e=n.url,r=n.ref;return pt(pt({},t.content),{ope_channel:"tagger-custom",ope_event_type:t.type,ope_item_uri:e,ope_ref:r})},t}(),dt=function(){return dt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},dt.apply(this,arguments)},ht=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},yt=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},vt=function(){function t(t,n,e,r,o,i,a,c){this.seat=t,this.dcapiClient=n,this.consent=e,this.trackingStrategy=r,this.storage=o,this.cookiesyncBaseUrl=i,this.tenant=a,this.cookieSyncIntervalMillis=c,this.cookiesyncEndpoint="/".concat(this.seat,"/v2/cookiesync"),this.localNextCookieSync=null}return t.progInstance=function(n){return new t(n.seat,n.dcapiClient,n.consent,ot.progInstance(),localStorage,void 0,n.tenant,432e5)},t.prototype.checkTrackingConsent=function(t){if(this.trackingStrategy.discardTrackingEvents())throw"Tracking events should be discarded.";if(!t.trackingEnabled())throw"Consent has not been given."},t.prototype.enrichEvent=function(t,n,e){var r=e.extraEventProperties();return n.cpid&&(r=dt(dt({},r),{ope_user_id:n.cpid})),this.tenant&&(r=dt(dt({},r),{ope_tenant:this.tenant})),dt(dt({},t),r)},t.prototype.setThirdPartyTrackability=function(t){if("cookie"==t)this.trackingStrategy.setThirdPartyTrackability(!0);else{if("fpid"!==t&&"cpid"!==t)throw"Unknown mode returned by visit API: ".concat(t);this.trackingStrategy.setThirdPartyTrackability(!1)}},t.prototype.sendVisitEvent=function(t){return ht(this,void 0,void 0,(function(){var n,e,r,o,i,a,c;return yt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,Promise.all([this.consent,this.trackingStrategy.onInit$])];case 1:return n=u.sent(),e=n[0],n[1],this.checkTrackingConsent(e),r=ft.fromVisitEvent(t),o=this.trackingStrategy.getOrCreateIds(e),i=this.enrichEvent(r,o,e),[4,this.dcapiClient.ingestEvent(lt.visitEndpoint,i,o.fpid,null)];case 2:return a=u.sent(),this.setThirdPartyTrackability(a),this.trackingStrategy.firstVisitEventSent(),"cookie"==a&&this.dispatchCookieSync(e),[3,4];case 3:return c=u.sent(),this.onRejection("VisitEvent",c),[3,4];case 4:return[2]}}))}))},t.prototype.dispatchCookieSync=function(t){if(this.cookieSyncIntervalMillis){var n=this.localNextCookieSync;try{n||(n=this.storage.getItem("ope_cs"))}catch(t){}var e=Date.now();if(n&&parseInt(n)>e)return;var r=Date.now()+this.cookieSyncIntervalMillis;try{this.storage.setItem("ope_cs",r.toString())}catch(t){}this.localNextCookieSync=r.toString()}if(this.cookiesyncBaseUrl){var o=new URL(this.cookiesyncEndpoint,this.cookiesyncBaseUrl);Object.entries(t.extraEventProperties()).forEach((function(t){var n=t[0],e=t[1];void 0!==e&&o.searchParams.append(n,e)})),this.loadImage(o.toString())}},t.prototype.loadImage=function(t){var n=this,e=new Image;e.addEventListener("error",(function(t){n.storage.removeItem("ope_cs")})),e.src=t},t.prototype.sendCustomEvent=function(t){return ht(this,void 0,void 0,(function(){var n,e,r,o,i,a,c;return yt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),[4,Promise.all([this.consent,this.trackingStrategy.onInit$])];case 1:return n=u.sent(),e=n[0],n[1],this.checkTrackingConsent(e),r=ft.fromCustomEvent(t),o=this.trackingStrategy.getOrCreateIds(e),i=this.enrichEvent(r,o,e),[4,this.dcapiClient.ingestEvent(lt.visitEndpoint,i,o.fpid,null)];case 2:return a=u.sent(),this.setThirdPartyTrackability(a),"cookie"==a&&this.dispatchCookieSync(e),[3,4];case 3:return c=u.sent(),this.onRejection("CustomEvent",c),[3,4];case 4:return[2]}}))}))},t.prototype.onRejection=function(t,n){},t}(),gt=function(){return gt=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},gt.apply(this,arguments)},wt=function(){function t(t){t.sendVisitEvent(bt({}))}return t.prototype.processSendVisitCommand=function(){throw Error('"sendVisit" command is not supported with automatic visit provider')},t}(),mt=function(){function t(t){this.tracker=t}return t.prototype.processSendVisitCommand=function(t){this.tracker.sendVisitEvent(bt(t))},t}();function bt(t){return gt(gt({},kt()),{tz:(new Date).getTimezoneOffset()/60,screen:window.screen.width+"x"+window.screen.height+"x"+window.screen.colorDepth,visiturl:t.visitUrl,dcRegion:nt()})}function kt(){var t,n;return{url:window.location.href,ref:document.referrer,tref:null===(n=null===(t=window.top)||void 0===t?void 0:t.document)||void 0===n?void 0:n.referrer}}var St=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},Pt=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},Ot=function(){function t(t){this.privacyAwareStorage=t}return t.instance=function(){return new t(new W(localStorage))},t.prototype.update=function(t,n,e,r){return St(this,void 0,void 0,(function(){return Pt(this,(function(e){switch(e.label){case 0:return[4,n.consent];case 1:return e.sent().trackingEnabled()||this.remove(),[4,n.deviceAccessOk()];case 2:return e.sent()&&this.doUpdate(t,n,r),[2]}}))}))},t.prototype.doUpdate=function(t,n,e){return St(this,void 0,void 0,(function(){var r,o=this;return Pt(this,(function(i){return r=t.getProfile(n,e).catch((function(t){return{error:t.message||"Unknown error"}})),[2,this.privacyAwareStorage.withConsent(n).then((function(t){return St(o,void 0,void 0,(function(){var n,e;return Pt(this,(function(o){switch(o.label){case 0:return n=this.save,e=[t],[4,r];case 1:return n.apply(this,e.concat([o.sent()])),[2]}}))}))}),(function(t){return St(o,void 0,void 0,(function(){return Pt(this,(function(t){return[2,void 0]}))}))}))]}))}))},t.prototype.save=function(n,e){n.setItem(t.localStorageKey,JSON.stringify(e))},t.prototype.remove=function(){this.privacyAwareStorage.removeItem(t.localStorageKey)},t.localStorageKey="opecloud_ctx",t}(),Ct=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},It=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},_t=function(){function t(t){this.timeoutInMillis=2e3,this.consent=this.loadConsent(t)}return t.prototype.deviceAccessOk=function(){return Ct(this,void 0,void 0,(function(){return It(this,(function(t){switch(t.label){case 0:return this.deviceAccessRestricted?[3,1]:[2,!0];case 1:return[4,this.consent];case 2:return[2,t.sent().deviceAccessAllowed()]}}))}))},t.prototype.isAvailable=function(){var t=this,n=this.ping().then((function(){return!0})),e=new Promise((function(n){return setTimeout((function(){return n(!1)}),t.timeoutInMillis)}));return Promise.race([n,e])},t}(),xt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Et=function(){function t(){}return t.prototype.applies=function(){return!0},t.prototype.trackingEnabled=function(){return!0},t.prototype.deviceAccessAllowed=function(){return!0},t.prototype.extraEventProperties=function(){return{cmpstatus:"notrequired"}},t.prototype.consentString=function(){return null},t.prototype.papiParameters=function(){return{}},t}(),Tt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!1,n}return xt(n,t),n.prototype.loadConsent=function(t){return Promise.resolve(new Et)},n.prototype.ping=function(){return Promise.resolve()},n}(_t),Ft=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),At=function(){function t(){}return t.prototype.applies=function(){return!0},t.prototype.trackingEnabled=function(){return!1},t.prototype.deviceAccessAllowed=function(){return!1},t.prototype.extraEventProperties=function(){return{}},t.prototype.consentString=function(){return null},t.prototype.papiParameters=function(){return{}},t}(),jt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return Ft(n,t),n.prototype.loadConsent=function(t){return Promise.resolve(new At)},n.prototype.ping=function(){return Promise.resolve()},n}(_t);function Ut(){return Math.random().toString().substring(2)}var Dt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rt=function(){function t(t){this.tcData=t}return t.prototype.applies=function(){return!1!==this.tcData.gdprApplies},t.prototype.checkVendorConsent=function(){var t,n,e=null===(n=null===(t=this.tcData)||void 0===t?void 0:t.vendor)||void 0===n?void 0:n.consents;return void 0!==e&&!0===e[this.vendorId]},t.prototype.purposeConsent=function(t){var n,e,r;return!!(null===(r=null===(e=null===(n=this.tcData)||void 0===n?void 0:n.purpose)||void 0===e?void 0:e.consents)||void 0===r?void 0:r[t])},t.prototype.legitimateInterest=function(t){var n,e,r;return!!(null===(r=null===(e=null===(n=this.tcData)||void 0===n?void 0:n.purpose)||void 0===e?void 0:e.legitimateInterests)||void 0===r?void 0:r[t])},t.prototype.deviceAccessAllowed=function(){var t=this.checkVendorConsent()&&this.purposeConsent(1);return!this.applies()||t},t.prototype.trackingEnabled=function(){return!this.applies()||this.checkConsent()},t.prototype.extraEventProperties=function(){return{cmpstatus:this.applies()?"cmpconsent":"gdprdoesnotapply",tcString:this.tcData.tcString}},t.prototype.consentString=function(){return this.tcData.tcString},t.prototype.papiParameters=function(){return{gdpr_applies:this.applies()?"1":"0",consent_string:this.tcData.tcString}},t}(),Lt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.vendorId=92,n}return Dt(n,t),n.prototype.checkConsent=function(){var t=this;return this.checkVendorConsent()&&this.purposeConsent(1)&&[3,5,7,8,9].every((function(n){return t.purposeConsent(n)||t.legitimateInterest(n)}))},n}(Rt),Mt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.vendorId=28,n}return Dt(n,t),n.prototype.checkConsent=function(){var t=this;return this.checkVendorConsent()&&[1,2,3,4,7,9,10].every((function(n){return t.purposeConsent(n)}))},n}(Rt),Nt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return Dt(n,t),n.prototype.locateTcfFrame=function(t){return t.frames.__tcfapiLocator||t==window.top?t:this.locateTcfFrame(t.parent)},n.prototype.registerTcfListener=function(t,n,e){window.addEventListener("message",e,!1),this.locateTcfFrame(window).postMessage({__tcfapiCall:{command:t,version:2,callId:n}},"*")},n.prototype.loadConsent=function(t){var n=this;return new Promise((function(e){var r=Ut();n.registerTcfListener("addEventListener",r,(function(n){var o=n.data.__tcfapiReturn;o&&o.callId===r&&o.success&&(null==(i=o.returnValue)||function(t){return["useractioncomplete","tcloaded"].includes(t.eventStatus)}(i)&&("ope"==t?e(new Lt(i)):"tpl"==t&&e(new Mt(i))));var i;o&&o.callId===r&&o.success}))}))},n.prototype.ping=function(){var t=this;return new Promise((function(n){var e=Ut();t.registerTcfListener("ping",e,(function(t){var r=t.data.__tcfapiReturn;r&&r.callId===e&&r.success?n():r&&r.callId===e&&r.success}))}))},n}(_t),Bt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gt=function(){function t(n){if(!(null==n?void 0:n.match(t.regex)))throw new Error("invalid uspString: ".concat(n));this.uspString=n.toUpperCase()}return t.prototype.ccpaApplies=function(){return"1---"!=this.uspString},Object.defineProperty(t.prototype,"salesOptOut",{get:function(){var t,n=null===(t=this.uspString)||void 0===t?void 0:t.charAt(2);return"Y"===n||"N"!==n&&null},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.uspString},t.regex=/^[1][nNyY-][nNyY-][nNyY-]$/,t}(),Vt=function(){function t(t){this.uspData=t;try{this.uspString=new Gt(null==t?void 0:t.uspString)}catch(n){throw new Error("failed to initialize USPConsent. uspData: ".concat(t,", error: ").concat(n.message))}}return t.prototype.applies=function(){return this.uspString.ccpaApplies()},t.prototype.trackingEnabled=function(){return!this.uspString.ccpaApplies()||!this.uspString.salesOptOut},t.prototype.deviceAccessAllowed=function(){return!0},t.prototype.extraEventProperties=function(){return{uspstatus:this.uspString.ccpaApplies()?this.uspString.salesOptOut?"uspoptoutsaleconsent":"uspoptoutsalenoconsent":"ccpadoesnotapply"}},t.prototype.consentString=function(){return this.uspString.toString()},t.prototype.papiParameters=function(){return{}},t}(),zt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return Bt(n,t),n.prototype.loadConsent=function(t){return new Promise((function(t,e){var r=Ut();function o(t){return t.frames.__uspapiLocator?t:t==window.top?null:o(t.parent)}window.addEventListener("message",(function(n){var o=n.data.__uspapiReturn;if((null==o?void 0:o.callId)===r)if(o.success)try{var i=new Vt(o.returnValue);t(i)}catch(t){e(t)}else e(new Error(o.returnValue))}),!1),function t(e,r,i){void 0===r&&(r=n.retries);void 0===i&&(i=n.delay);return new Promise((function(n,a){var c=o(e);c?n(c):r>0?setTimeout((function(){return n(t(e,r-1,i))}),i):a(new N)}))}(window).then((function(t){t.postMessage({__uspapiCall:{callId:r,command:"getUSPData",version:1}},"*")})).catch((function(){e(new N)}))}))},n.prototype.ping=function(){return this.consent.then((function(t){}))},n.delay=100,n.retries=20,n}(_t),Kt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$t=function(){function t(t,n){if(this.gppData=t,this.gppString=n,!t)throw Error("gppData must be defined to parse");this.optedOut=this.getOptoutFromField(t,"SharingNotice",[1])||this.getOptoutFromField(t,"SaleOptOutNotice",[1])||this.getOptoutFromField(t,"SharingOptOutNotice",[1])||this.getOptoutFromField(t,"TargetedAdvertisingOptOutNotice",[1])||this.getOptoutFromField(t,"SensitiveDataProcessingOptOutNotice",[0])||this.getOptoutFromField(t,"SensitiveDataLimitUseNotice",[0])||this.getOptoutFromField(t,"SaleOptOut",[2])||this.getOptoutFromField(t,"SharingOptOut",[2])||this.getOptoutFromField(t,"TargetedAdvertisingOptOut",[2])||this.getOptoutFromField(t,"SensitiveDataProcessing",[0])||this.getOptoutFromField(t,"KnownChildSensitiveDataConsents",[0])||this.getOptoutFromField(t,"PersonalDataConsents",[0,2]),1==t.MspaCoveredTransaction&&(this.optedOut||(this.optedOut=this.getOptoutFromField(t,"MspaOptOutOptionMode",[0,1])||this.getOptoutFromField(t,"MspaServiceProviderMode",[0,2])))}return t.prototype.getOptoutFromField=function(t,n,e){if(!(n in t))throw Error("gppdata field should be present: ".concat(n));return!e.includes(t[n])},t.prototype.applies=function(){return!0},t.prototype.deviceAccessAllowed=function(){return!this.optedOut},t.prototype.trackingEnabled=function(){return!this.optedOut},t.prototype.consentString=function(){return this.gppString},t.prototype.extraEventProperties=function(){return{}},t.prototype.papiParameters=function(){return{gppString:this.gppString}},t}(),qt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n.listenerId=null,n}return Kt(n,t),n.prototype.locateGppFrame=function(t){return t.frames.__gppLocator||t==window.top?t:this.locateGppFrame(t.parent)},n.prototype.loadConsent=function(t){var n=this;return new Promise((function(t){var e=Ut();window.addEventListener("message",(function(n){var r=n.data.__gppReturn;r&&r.callId===e&&r.success?function(n){if(n&&n.data){if(function(t){if("signalStatus"!==t.eventName||"ready"!==t.data)return!1;if("usnat"in t.pingData.parsedSections)return!0;return!1}(n)){var e=n.pingData.gppString,r=new $t(n.pingData.parsedSections.usnat,e);t(r)}}else;}(r.returnValue):r&&r.callId===e&&r.success}),!1),n.locateGppFrame(window).postMessage({__gppCall:{command:"addEventListener",version:1,callId:e}},"*")}))},n.prototype.ping=function(){var t=this;return new Promise((function(n){var e=Ut();window.addEventListener("message",(function(t){var r=t.data.__gppReturn;r&&r.callId===e&&r.success?n():r&&r.callId===e&&r.success}),!1),t.locateGppFrame(window).postMessage({__gppCall:{command:"ping",version:1,callId:e}},"*")}))},n}(_t),Wt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jt=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.deviceAccessRestricted=!0,n}return Wt(n,t),n.prototype.loadConsent=function(t){var n=this;return new Promise((function(e,r){n.frameworks=[new Nt(t),new zt(t),new qt(t)],n.frameworks.map((function(t){return t.consent})).forEach((function(t){t.then((function(t){t.applies()&&e(t)})).catch((function(t){}))})),Promise.allSettled(n.frameworks.map((function(t){return t.isAvailable()}))).then((function(t){var e=n.frameworks.filter((function(e,r){var o=t[r];return n.frameworkShouldBeConsidered(o)}));return Promise.allSettled(e.map((function(t){return t.consent})))})).then((function(t){n.pickSignalOutOfAllSettled(t,e,r)}))}))},n.prototype.ping=function(){return Promise.resolve()},n.prototype.frameworkShouldBeConsidered=function(t){if("fulfilled"==t.status)return t.value;if(t.reason instanceof N)return!1;try{return t.reason.message!==N.errorMessage}catch(t){return!0}},n.prototype.pickSignalOutOfAllSettled=function(t,n,e){var r=t.find((function(t){return"fulfilled"==t.status&&t.value.applies()})),o=t.find((function(t){return"rejected"==t.status&&!(t.reason instanceof N)})),i=t.find((function(t){return"fulfilled"==t.status}));r?n(r.value):o?e(o.reason):n(i?new Et:new At)},n}(_t),Xt=function(){function t(){}return t.initialize=function(t,n){switch(t){case"tcf2":return new Nt(n);case"implied":return new Tt(n);case"usp":return new zt(n);case"auto":return new Jt(n);case"noConsent":return new jt(n);case"gpp":return new qt(n);default:throw new Error("Privacy framework '".concat(t,"' not supported"))}},t}(),Yt=function(){function t(n,e,r,o,i,a,c,u,s,l){void 0===u&&(u=t.defaultIdResolution),void 0===s&&(s=864e5),void 0===l&&(l="google-topics"),this.seat=n,this.trackingStrategy=e,this.privacyFramework=r,this.dcAPIClient=o,this.storage=i,this._document=a,this.tenant=c,this.idResolution=u,this.sendInterval=s,this.channel=l}return t.defaultIdResolution=function(t){return t.cpid},t.prototype.upload=function(){var t=this;return Promise.all([this.privacyFramework.consent,this.trackingStrategy.onInit$]).then((function(n){var e=n[0];if(!e.trackingEnabled())throw"Missing consent - not proceeding.";if(!t._document.browsingTopics)throw"No Topics API - not proceeding.";if(!t.shouldSendTopics())throw"Topics cached with TTL > 0 - not proceeding.";var r=t.trackingStrategy.getOrCreateIds(e);return{event:{ope_channel:t.channel,ope_event_type:"topics",ope_item_uri:window.location.href,ope_tenant:t.tenant,ope_user_id:t.idResolution(r)},fpid:r.fpid}})).then((function(n){var e=n.event,r=n.fpid;return t.dcAPIClient.ingestEvent(lt.eventEndpoint,e,r,{browsingTopics:!0})})).then((function(){t.updateTopics()}))},t.prototype.shouldSendTopics=function(){var n=this.storage.getItem(t.topicsLocalStoreMarker);return!n||JSON.parse(n).exp<Date.now()},t.prototype.updateTopics=function(){this.storage.setItem(t.topicsLocalStoreMarker,JSON.stringify({exp:Date.now()+this.sendInterval}))},t.topicsLocalStoreMarker="_ope_topics",t}(),Ht=function(){function t(t,n,e){this.seat=t,this.cmpName=n,this.options=e}return t.prototype.run=function(t,n){var e,r,o,i,a,c,u,s,l,p,f,d,h,v,g,w,m,b,k;if(null==t){var S=new URL(null!==(r=null===(e=this.options)||void 0===e?void 0:e.taggerUrl)&&void 0!==r?r:"https://".concat(this.seat,".tagger.opecloud.com")),P=new URL(null!==(i=null===(o=this.options)||void 0===o?void 0:o.dcAPIUrl)&&void 0!==i?i:"https://".concat(this.seat,".dcapi.tagger.opecloud.com")),O=lt.initializeClient(P,n.funnel),C=L(S,this.seat),I=Xt.initialize(this.cmpName,"ope");w=I.consent,m=C,b=this.cmpName,k=!1,w.then((function(t){k=!0,t.trackingEnabled()||m(new D({cmp:b,consentString:t.consentString()}))}),(function(t){m(new R({cmp:b,errorMessage:JSON.stringify(t)}))})),window.setTimeout((function(){k||m(new U({cmp:b}))}),5e3),I.consent.then((function(t){t.trackingEnabled()||new y(localStorage).removeFpid()}));var _=ot.parseAdaptiveTracking(this.options.trackingStrategy);_.onInit$.then((function(){}));var x=new vt(this.seat,O,I.consent,_,localStorage,S,null,432e5),E=function(t,n){switch(t){case"automatic":return new wt(n);case"cmd":return new mt(n);default:throw new Error("Invalid visit provider ".concat(t))}}(null!==(c=null===(a=this.options)||void 0===a?void 0:a.visitProvider)&&void 0!==c?c:"automatic",x),T=new URL(null!==(s=null===(u=this.options)||void 0===u?void 0:u.profileApiUrl)&&void 0!==s?s:"https://".concat(this.seat,".papi-public.").concat(nt(),".tagger.opecloud.com/v1/targeting")),F=new ut(this.seat,null,T,_);if(null===(l=this.options)||void 0===l?void 0:l.programmaticTenantId){var A=Xt.initialize(this.cmpName,"tpl"),j=new URL(null!==(f=null===(p=this.options)||void 0===p?void 0:p.programmaticDcAPIUrl)&&void 0!==f?f:"https://pdmp.dcapi.dmp.3lift.com");this.initProgrammaticIntegration(A,j,x,n)}var M=new K(S);if(null===(d=this.options)||void 0===d?void 0:d.googleTopics){var N=new Yt(this.seat,x.trackingStrategy,I,O,localStorage,window.document,void 0,Yt.defaultIdResolution,864e5);_.onSetCookieCompleted$.then((function(){return N.upload()})).then((function(){})).catch((function(t){}))}return{tracker:x,privacyFramework:I,profileApi:F,reporter:C,visitProvider:E,trackingStrategy:_,taggerUrl:S,taggerGdprClient:M,dcAPIClient:O,programmaticTenantId:null===(h=this.options)||void 0===h?void 0:h.programmaticTenantId,firstPartyDomain:null===(g=null===(v=this.options)||void 0===v?void 0:v.trackingStrategy)||void 0===g?void 0:g.firstPartyIdTrackingDomain}}return t},t.prototype.initProgrammaticIntegration=function(t,n,e,r){var o=Ot.instance(),i=ut.progInstance({tenantId:this.options.programmaticTenantId,profileApiUrl:this.options.profileApiUrl}),a=lt.initializeClient(n,r.funnel);if("cmd"!=this.options.visitProvider){o.update(i,t,e.trackingStrategy);var c=vt.progInstance({seat:"pdmp",tenant:this.options.programmaticTenantId,dcapiClient:a,consent:t.consent});new wt(c)}t.consent.then((function(t){t.trackingEnabled||o.remove()}))},t}();var Qt=function(){function t(t,n,e){this.seat=t,this.callback=n,this.options=e}return t.prototype.run=function(t){var n,e,r,o,i,a,c,u=null===(e=null===(n=this.options)||void 0===n?void 0:n.awaitConsent)||void 0===e||e;return i=null!==(o=null===(r=this.options)||void 0===r?void 0:r.useLocalStorageCache)&&void 0!==o&&o?this.getWithCache(u,t.profileApi,t.privacyFramework):this.getWithoutCache(u,t.profileApi,t.privacyFramework),a=i,c=this.callback,a.then((function(t){c(null,t)}),(function(t){return c(t)})),t},t.prototype.getWithoutCache=function(t,n,e){if(t)return n.getProfile(e);var r=n.getProfile(e),o=n.getContextual().then((function(t){return new Promise((function(n){return setTimeout((function(){return n(t)}),5)}))}));return Promise.race([r,o])},t.prototype.getWithCache=function(t,n,e){if(t)return n.getCacheBackedProfile(e);var r=n.getCacheBackedProfile(e),o=n.getCacheBackedContextual(e).then((function(t){return new Promise((function(n){return setTimeout((function(){return n(t)}),5)}))}));return Promise.race([r,o])},t}(),Zt=function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])},t(n,e)};return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tn=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},nn=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},en=function(t){function n(n,e){return t.call(this,n,e)||this}return Zt(n,t),n.prototype.action=function(n){return tn(this,void 0,void 0,(function(){var e,r,o,i,a;return nn(this,(function(c){switch(c.label){case 0:return(e=t.prototype.getFpidProvider.call(this,n)).optin(),i=(o=e).getOrCreateFpid,[4,n.privacyFramework.consent];case 1:return r=i.apply(o,[c.sent()]).fpid,a=n.taggerGdprClient.optIn(this.seat,null,r),n.programmaticTenantId?[4,n.taggerGdprClient.optIn("pdmp",n.programmaticTenantId,r)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[4,a];case 4:return c.sent(),[2]}}))}))},n}(g),rn=function(){return rn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},rn.apply(this,arguments)},on=function(){function t(t,n,e){this.seat=t,this.eventType=n,this.content=e}return t.prototype.run=function(t){var n;return null===(n=null==t?void 0:t.tracker)||void 0===n||n.sendCustomEvent(rn(rn({},kt()),{type:this.eventType,content:this.content})),t},t}(),an=function(){return an=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},an.apply(this,arguments)},cn=function(){function t(t,n,e){this.seat=t,this.assetURI=n,this.interactionType=e,this.defaultInteractionType="ope_visit"}return t.prototype.run=function(t){var n=this;return Promise.all([t.privacyFramework.consent,t.trackingStrategy.onInit$,t.trackingStrategy.onSetCookieCompleted$]).then((function(e){var r,o=t.trackingStrategy.getOrCreateIds(e[0]),i=o.cpid?{ope_user_id:o.cpid}:{},a=an({ope_event_type:"default",ope_interaction_type:null!==(r=n.interactionType)&&void 0!==r?r:n.defaultInteractionType,ope_item_uri:n.assetURI,ope_channel:"browser-interactions"},i);t.dcAPIClient.ingestEvent(lt.eventEndpoint,a,o.fpid)})),t},t}(),un=function(){function t(t,n){this.seat=t,this.options=n}return t.prototype.run=function(t,n){var e=this;return null==t||t.visitProvider.processSendVisitCommand(this.options),t.programmaticTenantId&&t.privacyFramework.consent.then((function(r){t.trackingStrategy.getOrCreateIds(r);var o=Ot.instance(),i=ut.progInstance({tenantId:t.programmaticTenantId});o.doUpdate(i,t.privacyFramework,e.options.visitUrl);var a=lt.initializeClient(new URL("https://pdmp.dcapi.dmp.3lift.com"),n.funnel);vt.progInstance({seat:"pdmp",tenant:t.programmaticTenantId,dcapiClient:a,consent:t.privacyFramework.consent}).sendVisitEvent(bt(e.options))})),t},t}(),sn=function(){return sn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},sn.apply(this,arguments)},ln=function(){function t(t,n){this.seat=t,this.taggerUrl=n,this.overlayId=Ut()}return t.prototype.showModalWindow=function(t){var n=this;if(!document.getElementById(this.overlayId)){var e=new y(localStorage).isOptedOut();document.body.innerHTML+='\n        <div id="'.concat(this.overlayId,'" style="').concat(fn.inline(fn.overlay),'">\n          <div  id="modal_').concat(this.overlayId,'" style="').concat(fn.inline(fn.modal),'" data-e2e="ppmodal">\n\n          <span id="close_').concat(this.overlayId,'"\n                style="').concat(fn.inline(fn.closeX),'">X</span>\n\n            <div style="padding:5%;">\n\n              <h2 style="margin-top:0;">').concat(pn.get("title",t),"</h2>\n\n              <div>").concat(pn.get("line1",t),':\n                <em id="status_').concat(this.overlayId,'">\n                  ').concat(e?pn.get("optedOut",t):pn.get("optedIn",t),'\n                </em>\n              </div>\n\n              <br>\n\n              <button\n                  id="optout_').concat(this.overlayId,'"\n                  style="').concat(fn.inline(e?fn.hiddenButton:fn.button),'"\n                  data-e2e="optout">\n                ').concat(pn.get("optOutBtn",t),'\n              </button>\n\n              <button\n                  id="optin_').concat(this.overlayId,'"\n                  style="').concat(fn.inline(e?fn.button:fn.hiddenButton),'"\n                  data-e2e="optin">\n                  ').concat(pn.get("optInBtn",t),"\n              </button>\n\n              <br><br>\n\n              <span> ").concat(pn.get("line2",t),'\n                <a style="color:').concat(fn.opeDarkBlue,';"\n                  href="').concat(this.policyUrl(t),'"\n                  data-e2e="pplink">').concat(pn.get("ppLink",t),"<a/>\n              <span/>\n\n            </div>\n\n          </div>\n        </div>\n      "),document.getElementById(this.overlayId).addEventListener("click",(function(t){t.target.id===n.overlayId&&n.removeModalWindow()})),document.getElementById("close_".concat(this.overlayId)).addEventListener("click",(function(){return n.removeModalWindow()})),document.getElementById("optout_".concat(this.overlayId)).addEventListener("click",(function(){document.getElementById("optout_".concat(n.overlayId)).style.display="none",document.getElementById("optin_".concat(n.overlayId)).style.display="inline-block",document.getElementById("status_".concat(n.overlayId)).innerText=pn.get("optedOut",t),window.ope(n.seat,"optout")})),document.getElementById("optin_".concat(this.overlayId)).addEventListener("click",(function(){document.getElementById("optout_".concat(n.overlayId)).style.display="inline-block",document.getElementById("optin_".concat(n.overlayId)).style.display="none",document.getElementById("status_".concat(n.overlayId)).innerText=pn.get("optedIn",t),window.ope(n.seat,"optin")}))}},t.prototype.removeModalWindow=function(){var t=document.getElementById(this.overlayId);t&&document.body.removeChild(t)},t.prototype.policyUrl=function(t){var n,e=new URL("".concat(this.seat,"/privacy-policy.html"),this.taggerUrl),r=null===(n=new y(localStorage).getIds())||void 0===n?void 0:n.fpid;return r&&e.searchParams.append("fpid",r),t&&e.searchParams.append("lang",t),e},t}(),pn=function(){function t(){}return t.get=function(n,e){var r;return null!==(r=("jp"==e?t.jp:t.en)[n])&&void 0!==r?r:n},t.en={title:"1plusx Tracking Status",line1:"Current tracking status",line2:"For additional privacy and regulatory settings visit",optInBtn:"OPT-IN",optOutBtn:"OPT-OUT",optedIn:"opted-in",optedOut:"opted-out",ppLink:"1plusX privacy page"},t.jp={title:"1plusX  ",line1:"",line2:"",optInBtn:"",optOutBtn:"",optedIn:"",optedOut:"",ppLink:"1plusX  "},t}(),fn=function(){function t(){}return t.inline=function(t){for(var n="",e=0,r=Object.entries(t);e<r.length;e++){var o=r[e],i=o[0],a=o[1],c=i.replace(/[A-Z]/g,"-$&").toLowerCase();n+="".concat(c,":").concat(a,";")}return n},t.opeLightBlue="#33C3F0",t.opeDarkBlue="#1EAEDB",t.button={backgroundColor:t.opeLightBlue,border:"1px solid",borderRadius:"4px",boxSizing:"border-box",color:"#FFF",cursor:"pointer",display:"inline-block",fontSize:"11px",fontWeight:"600",height:"38px",letterSpacing:".1rem",lineHeight:"38px",margin:"5px",padding:"0 38px",textAlign:"center",textDecoration:"none",whiteSpace:"nowrap"},t.hiddenButton=sn(sn({},t.button),{display:"none"}),t.closeX={backgroundColor:"black",color:"white",cursor:"pointer",fontSize:"sans-serif",padding:"5px",position:"absolute",right:"3px"},t.modal={backgroundColor:"#eeeeee",left:"5%",margin:"auto",position:"fixed",top:"5%",width:"90%"},t.overlay={backgroundColor:"rgba(255, 255, 255, 0.5)",height:"100%",left:"0%",margin:"auto",position:"fixed",top:"0%",width:"100%"},t}(),dn=function(){return dn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},dn.apply(this,arguments)},hn=function(){function t(t,n){this.seat=t,this.options=n}return t.prototype.run=function(t){var n,e=null!==(n=t.privacyPolicy)&&void 0!==n?n:new ln(this.seat,t.taggerUrl);return e.showModalWindow(this.options.language),dn({privacyPolicy:e},t)},t}(),yn=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},vn=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},gn=function(){function t(n,e){void 0===e&&(e=t.defaultTtl),this._cache=new Y(t.storageKey,n,e)}return t.prototype.contains=function(t,n,e){return yn(this,void 0,void 0,(function(){var r;return vn(this,(function(o){switch(o.label){case 0:return r=this.key(n,e),[4,this._cache.get(t,r)];case 1:return[2,o.sent()]}}))}))},t.prototype.add=function(t,n,e){return yn(this,void 0,void 0,(function(){var r;return vn(this,(function(o){switch(o.label){case 0:return r=this.key(n,e),[4,this._cache.put(t,r,!0)];case 1:return o.sent(),[2]}}))}))},t.prototype.key=function(t,n){return H("".concat(JSON.stringify(t),":").concat(n)).toString()},t.storageKey="opecloud_sync_c",t.defaultTtl=864e5,t}(),wn=function(){return wn=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},wn.apply(this,arguments)},mn=function(t,n,e,r){return new(e||(e=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?o(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(a,c)}u((r=r.apply(t,n||[])).next())}))},bn=function(t,n){var e,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(t,a)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},kn=function(){function t(t,n,e){void 0===e&&(e=localStorage),this.seat=t,this.ids=n,this.storage=e}return t.prototype.run=function(t){var n=this;return Promise.all([t.privacyFramework.consent,t.trackingStrategy.onInit$,t.trackingStrategy.onSetCookieCompleted$]).then((function(e){var r=t.trackingStrategy.getOrCreateIds(e[0]);n.syncIds(t.privacyFramework,r,t.dcAPIClient)})),t},t.prototype.syncIds=function(t,n,e){return mn(this,void 0,void 0,(function(){var r,o,i,a,c,u;return bn(this,(function(s){switch(s.label){case 0:return r=this.initCache(),[4,Promise.all(this.ids.map((function(e){return r.contains(t,n,e)})))];case 1:return o=s.sent(),0==(i=this.ids.filter((function(t,n){return!o[n]}))).length?[2]:[4,e.ingestEvent(lt.eventEndpoint,this.createSyncEvent(n,i),n.fpid)];case 2:s.sent(),a=0,c=i,s.label=3;case 3:return a<c.length?(u=c[a],[4,r.add(t,n,u)]):[3,6];case 4:s.sent(),s.label=5;case 5:return a++,[3,3];case 6:return[2]}}))}))},t.prototype.initCache=function(){return new gn(new W(this.storage))},t.prototype.createSyncEvent=function(t,n){var e=t.cpid?{ope_user_id:t.cpid}:{};return wn({ope_event_type:"sync-event",ope_alt_user_ids:n.join(","),ope_channel:"browser-syncs"},e)},t}(),Sn=function(){function t(t,n){this.seat=t,this.cb=n}return t.prototype.run=function(t){try{var n=t.trackingStrategy.getIds();return this.cb(null,n),t}catch(n){return this.cb(n,null),t}},t}(),Pn=function(){function t(t){void 0===t&&(t=[]),this.customCmdParser=t}return t.prototype.parse=function(t,e,r){try{for(var i=0,a=this.customCmdParser;i<a.length;i++){var c=a[i].parse(t,e,r);if(null!=c)return c}switch(e){case"init":var u=n.parseCmpName(r[0]),s=n.parseOptions(r[1]);return new Ht(t,u,s);case"send":var l=n.parseString(r[0]),p=n.parseObject(r[1]);return new on(t,l,p);case"sendVisit":var f=n.parseOptions(r[0]);return new un(t,f);case"sendInteraction":var d=n.parseString(r[0]),h=n.parseStringOrNull(r[1]);return new cn(t,d,h);case"syncIds":var y=n.parseStringArray(r[0]);return new kn(t,y);case"identifyUser":var v=n.parseStringOrNull(r[0]),g=n.parseStringOrNull(r[1]),w=n.parseOptions(r[2]);return new j(t,v,g,w);case"optin":return new en(t,n.validateOptCallback(null==r?void 0:r[0]));case"optout":return new C(t,n.validateOptCallback(null==r?void 0:r[0]));case"dataAccess":var m=n.parseString(r[0]),b=n.parseString(r[1]),S=n.validateOptCallback(null==r?void 0:r[2]);return new k(t,m,b,S);case"dataDeletion":return new E(t,n.validateOptCallback(null==r?void 0:r[0]));case"onProfile":var P=n.parseOptions(r[1]);return new Qt(t,n.validateCallback(r[0]),P);case"showPrivacyPolicy":return new hn(t,n.parseOptions(r[0]));case"hidePrivacyPolicy":return new T(t);case"trackingIds":return new Sn(t,n.validateCallback(r[0]));case"currentTrackingId":return new o(t,n.validateCallback(r[0]));default:return null}}catch(t){return null}},t}(),On=function(){function t(t){this.funnel=t,this.initialCallPromise=null,this.maxCallDelayMs=2e3}return t.prototype.callPixel=function(t,n){var e=this;return this.funnel.withRaceProtection((function(){return new Promise((function(r){Object.entries(n).forEach((function(n){var e=n[0],r=n[1];void 0!==r&&t.searchParams.append(e,r)}));var o=new Image;o.addEventListener("load",(function(){1==o.width&&1==o.height?r({isThirdPartyTrackable:!1}):r({isThirdPartyTrackable:!0})})),o.addEventListener("error",(function(){1==o.width&&1==o.height?r({isThirdPartyTrackable:!1}):r({isThirdPartyTrackable:!0})})),window.setTimeout((function(){r({isThirdPartyTrackable:!1})}),e.maxCallDelayMs),o.src=t.toString()}))}))},t}();function Cn(t){return new On(t)}var In=function(){function t(){this.initialCallPromise=null}return t.prototype.withRaceProtection=function(t){return null===this.initialCallPromise?(this.initialCallPromise=t(),this.initialCallPromise):this.initialCallPromise.then((function(){return t()}))},t.create=function(){return new t},t}();var _n,xn=function(t,e,r){var o=this;this.sdkStates=t,this.globalContext=e,this.commandParser=r,this.ope=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{var r=n.parseSeatId(t[0]),i=n.parseString(t[1]),a=o.commandParser.parse(r,i,t.slice(2));null!==a&&o.sdkStates.set(r,a.run(o.sdkStates.get(r),o.globalContext))}catch(t){}}},En=window.ope,Tn=new xn(new Map,{taggerClient:Cn(_n=In.create()),funnel:_n},new Pn).ope;if(En.q)for(var Fn=0,An=En.q;Fn<An.length;Fn++){var jn=An[Fn];Tn.apply(void 0,jn)}window.ope=Tn}();