"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2403],{2403:function(e,t,i){i.r(t),i.d(t,{Token:function(){return g}});var n=i(33419),a=i(2784),s=i(53615),o=i(8162),r=function(){var e=(0,n.Dv)(s.gigyaInstanceAtom),t=(0,n.Dv)(s.authenticationAtom),i=t.user,r=t.isAuthenticated,g=(0,o.v)(),c=g.getGygiaToken,u=g.getFreshGigyaUser;return(0,a.useEffect)((function(){if(e){var t=function(e){if(e.origin&&(-1!==e.origin.indexOf("rtbf.be")||-1!==e.origin.indexOf("auvio"))&&("string"!==typeof e.data||!(e.data.indexOf("_xx_")>-1||e.data.indexOf("cbdata")>-1))){var t=e.data;try{var n="object"===typeof t?t:JSON.parse(t);if("externalPlayerVideoMessage"!==n.type)return;if("getGigyaToken"===n.action)c().then((function(t){var i;n.token=t,n.action="gigyaTokenSuccess",n.type="externalPlayerVideoMessage",null===(i=e.source)||void 0===i||i.postMessage(JSON.stringify(n),"*")})).catch((function(t){var i;n.action="gigyaTokenFailNotConnected",n.type="externalPlayerVideoMessage",null===(i=e.source)||void 0===i||i.postMessage(JSON.stringify(n),"*")}));else if("getGigyaUser"===n.action){var a,s;if(r)n.user=i,n.action="gigyaUserSuccess",n.type="externalPlayerVideoMessage",null===(a=e.source)||void 0===a||a.postMessage(JSON.stringify(n),"*");else n.user=i,n.action="gigyaUserFailNotConnected",n.type="externalPlayerVideoMessage",null===(s=e.source)||void 0===s||s.postMessage(JSON.stringify(n),"*")}else if("getFreshGigyaUser"===n.action){var o;if(r)u().then((function(t){var i;n.user=t,n.action="gigyaUserSuccess",n.type="externalPlayerVideoMessage",null===(i=e.source)||void 0===i||i.postMessage(JSON.stringify(n),"*")})).catch((function(t){var i;n.action="gigyaUserFailNotConnected",n.type="externalPlayerVideoMessage",null===(i=e.source)||void 0===i||i.postMessage(JSON.stringify(n),"*")}));else n.user=i,n.action="gigyaUserFailNotConnected",n.type="externalPlayerVideoMessage",null===(o=e.source)||void 0===o||o.postMessage(JSON.stringify(n),"*")}}catch(g){}}};return window.addEventListener("message",t,!1),function(){window.removeEventListener("message",t)}}}),[e,i,r]),null},g=a.memo(r)}}]);